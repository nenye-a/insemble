# Migration `20200306133154-add-security-token`

This migration has been generated by RaymondAnggara at 3/6/2020, 1:31:54 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."TenantRegisterVerification" ADD COLUMN "tokenEmail" text  NOT NULL DEFAULT '',
ADD COLUMN "tokenQuery" text  NOT NULL DEFAULT '';

ALTER TABLE "public"."TenantEmailVerification" ADD COLUMN "tokenEmail" text  NOT NULL DEFAULT '';

ALTER TABLE "public"."LandlordRegisterVerification" ADD COLUMN "tokenEmail" text  NOT NULL DEFAULT '',
ADD COLUMN "tokenQuery" text  NOT NULL DEFAULT '';

ALTER TABLE "public"."LandlordEmailVerification" ADD COLUMN "tokenEmail" text  NOT NULL DEFAULT '';
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200306075320-add-token-email-and-query-reset-pass..20200306133154-add-security-token
--- datamodel.dml
+++ datamodel.dml
@@ -1,29 +1,38 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = "postgresql://prisma:prisma@localhost:5432/insemble?schema=public"
 }
 generator client {
   provider = "prisma-client-js"
 }
 enum TenantTier {
-  FREE EXPLORE SMART PROFESSIONAL
+  FREE
+  EXPLORE
+  SMART
+  PROFESSIONAL
 }
 enum LandlordTier {
-  FREE EXPLORE SMART PROFESSIONAL
+  FREE
+  EXPLORE
+  SMART
+  PROFESSIONAL
 }
 enum NewLocationPlan {
-  YES NOT_ACTIVE NOT_PLANNING
+  YES
+  NOT_ACTIVE
+  NOT_PLANNING
 }
 enum MarketingPreference {
-  PUBLIC PRIVATE
+  PUBLIC
+  PRIVATE
 }
 model MatchingProperty {
   id         String @id @default(cuid())
@@ -79,8 +88,9 @@
   title                String?
   description          String?
   properties           Property[]
   tier                 LandlordTier
+  pendingEmail         Boolean      @default(false)
   stripeCustomerId     String?      @unique
   stripeSubscriptionId String?      @unique
 }
@@ -171,10 +181,20 @@
   id            String  @default(cuid()) @id
   email         String
   landlordInput String
   verified      Boolean @default(false)
+  tokenEmail    String
+  tokenQuery    String
 }
+model LandlordEmailVerification {
+  id          String       @default(cuid()) @id
+  email       String
+  user        LandlordUser
+  verified    Boolean      @default(false)
+  tokenEmail  String
+}
+
 model SubscriptionTenantHistory {
   id             String     @default(cuid()) @id
   subscriptionId String
   tenantUser     TenantUser
@@ -187,15 +207,18 @@
   tenantInput   String
   filterInput   String?
   email         String
   verified      Boolean @default(false)
+  tokenEmail    String
+  tokenQuery    String
 }
 model TenantEmailVerification {
-  id       String     @default(cuid()) @id
-  email    String
-  user     TenantUser
-  verified Boolean    @default(false)
+  id          String     @default(cuid()) @id
+  email       String
+  user        TenantUser
+  verified    Boolean    @default(false)
+  tokenEmail  String
 }
 model TenantResetPasswordVerification {
   id         String     @default(cuid()) @id
```


