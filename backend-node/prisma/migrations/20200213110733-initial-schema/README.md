# Migration `20200213110733-initial-schema`

This migration has been generated by Joshua at 2/13/2020, 11:07:33 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Location" (
    "brand" text   ,
    "id" text  NOT NULL ,
    "lat" text  NOT NULL DEFAULT '',
    "lng" text  NOT NULL DEFAULT '',
    "name" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."LocationAndPerformance" (
    "address" text  NOT NULL DEFAULT '',
    "brand" text   ,
    "estimate" text  NOT NULL DEFAULT '',
    "id" text  NOT NULL ,
    "onlineSale" text  NOT NULL DEFAULT '',
    "physicalSale" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."TenantUser" (
    "Tier" text  NOT NULL DEFAULT 'FREE',
    "company" text  NOT NULL DEFAULT '',
    "description" text  NOT NULL DEFAULT '',
    "email" text  NOT NULL DEFAULT '',
    "firstName" text  NOT NULL DEFAULT '',
    "id" text  NOT NULL ,
    "lastName" text  NOT NULL DEFAULT '',
    "password" text  NOT NULL DEFAULT '',
    "title" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Brand" (
    "categories" text []  ,
    "equipmentIds" text []  ,
    "id" text  NOT NULL ,
    "locationCount" integer  NOT NULL DEFAULT 0,
    "maxAge" integer  NOT NULL DEFAULT 0,
    "maxIncome" integer  NOT NULL DEFAULT 0,
    "maxSize" integer  NOT NULL DEFAULT 0,
    "minAge" integer  NOT NULL DEFAULT 0,
    "minIncome" integer  NOT NULL DEFAULT 0,
    "minSize" integer  NOT NULL DEFAULT 0,
    "name" text  NOT NULL DEFAULT '',
    "newLocationPlan" text  NOT NULL DEFAULT 'YES',
    "personaIds" text []  ,
    "spaceType" text []  ,
    "tenantUser" text   ,
    "userRelation" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

ALTER TABLE "public"."Location" ADD FOREIGN KEY ("brand") REFERENCES "public"."Brand"("id") ON DELETE SET NULL

ALTER TABLE "public"."LocationAndPerformance" ADD FOREIGN KEY ("brand") REFERENCES "public"."Brand"("id") ON DELETE SET NULL

ALTER TABLE "public"."Brand" ADD FOREIGN KEY ("tenantUser") REFERENCES "public"."TenantUser"("id") ON DELETE SET NULL
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200213110733-initial-schema
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,84 @@
+
+datasource db {
+  provider = "postgresql"
+  url      = "postgresql://prisma:prisma@localhost:5432/insemble?schema=public"
+}
+
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+enum Tier {
+  FREE
+  EXPLORE
+  SMART
+  PROFESSIONAL
+}
+
+enum NewLocationPlan {
+  YES
+  NOT_ACTIVE
+  NOT_PLANNING
+}
+
+enum SpaceType {
+  FREE_STANDING
+  SHOPPING_CENTRE
+  INLINE
+  URBAN
+}
+
+
+model Location {
+  id   String @id
+  name String
+  lat  String
+  lng  String
+}
+
+model LocationAndPerformance {
+  id           String @id
+  address      String
+  physicalSale String
+  onlineSale   String
+  estimate     String
+}
+
+model TenantUser {
+  id          String  @id
+  email       String
+  password    String
+  firstName   String
+  lastName    String
+  company     String
+  title       String
+  description String
+  brands      Brand[]
+  Tier        Tier
+}
+
+model Brand {
+  id                     String                   @id
+  // Note: All field can be empty because some case
+  // Brand description
+  name                   String
+  categories             String[]
+  // Also for filter and description
+  userRelation           String
+  // Goal of this brand
+  newLocationPlan        NewLocationPlan
+  locations              Location[]
+  locationCount          Int
+  // Filter params for heatmap
+  minAge                 Int
+  maxAge                 Int
+  minIncome              Int
+  maxIncome              Int
+  personaIds             String[]
+  minSize                Int
+  maxSize                Int
+  equipmentIds           String[]
+  spaceType              SpaceType[]
+  locationAndPerformance LocationAndPerformance[]
+}
```


