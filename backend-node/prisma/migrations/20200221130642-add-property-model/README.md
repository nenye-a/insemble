# Migration `20200221130642-add-property-model`

This migration has been generated by RaymondAnggara at 2/21/2020, 1:06:43 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Space" (
    "available" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "condition" text  NOT NULL DEFAULT '',
    "description" text  NOT NULL DEFAULT '',
    "equipment" text []  ,
    "id" text  NOT NULL ,
    "mainPhoto" text  NOT NULL DEFAULT '',
    "photos" text []  ,
    "pricePerSqft" integer  NOT NULL DEFAULT 0,
    "property" text   ,
    "sqft" integer  NOT NULL DEFAULT 0,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Property" (
    "businessType" text []  ,
    "categories" text []  ,
    "exclusive" text []  ,
    "id" text  NOT NULL ,
    "landlordUser" text  NOT NULL ,
    "location" text  NOT NULL ,
    "marketingPreference" text  NOT NULL DEFAULT 'PUBLIC',
    "name" text  NOT NULL DEFAULT '',
    "propertyId" text   ,
    "propertyType" text []  ,
    "userRelation" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE UNIQUE INDEX "Property.propertyId" ON "public"."Property"("propertyId")

ALTER TABLE "public"."Space" ADD FOREIGN KEY ("property") REFERENCES "public"."Property"("id") ON DELETE SET NULL

ALTER TABLE "public"."Property" ADD FOREIGN KEY ("location") REFERENCES "public"."Location"("id") ON DELETE RESTRICT

ALTER TABLE "public"."Property" ADD FOREIGN KEY ("landlordUser") REFERENCES "public"."LandlordUser"("id") ON DELETE RESTRICT
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200219174008-add-landlord-session..20200221130642-add-property-model
--- datamodel.dml
+++ datamodel.dml
@@ -1,8 +1,8 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = "postgresql://prisma:prisma@localhost:5432/insemble?schema=public"
 }
 generator client {
@@ -124,8 +124,42 @@
   matchingProperties     MatchingProperty[]
   createdAt              DateTime                 @default(now())
 }
+enum MarketingPreference {
+  PUBLIC
+  PRIVATE
+}
+
+
+model Space {
+  id String @id @default(cuid())
+
+  mainPhoto    String
+  photos       String[]
+  description  String
+  condition    String
+  sqft         Int
+  pricePerSqft Int
+  equipment    String[]
+  available    DateTime
+}
+
+model Property {
+  id                  String              @id @default(cuid())
+  propertyId          String?             @unique
+  name                String
+  location            Location
+  landlordUser        LandlordUser
+  userRelation        String
+  propertyType        String[]
+  marketingPreference MarketingPreference
+  categories          String[]
+  exclusive           String[]
+  businessType        String[]
+  space               Space[]
+}
+
 model TenantSession {
   id        String     @default(cuid()) @id
   token     String
   createdAt DateTime   @default(now())
@@ -136,5 +170,5 @@
   id        String       @default(cuid()) @id
   token     String
   createdAt DateTime     @default(now())
   user      LandlordUser
-}
+}
```


